# 🚀 실행 방법

1. `npm i` 를 통해 node_modules 설치
2. `npm run dev` 개발 서버 실행.
3. localhost:3000 접속해서 결과 확인.

# 🛠️ 사용한 기술 스택 및 선택 이유

### 스타일링 도구

- tailwindCSS

별도의 스타일링 파일 없이 className으로 스타일링이 가능하고 네이밍에 고민 할 필요가 없어 선택했습니다.

### 폼 & 유효성

- react-hook-form
- zod

게시글 작성 등에 필요한 폼 상태를 RHF으로 처리하며, Zod와 resolver 통해 유효성 검증을 하며 유효성 검사는 Zod를 통해서만 할 수 있도록 관심사를 분리할 수 있는 장점이 있습니다. 또한 Zod 스키마로부터 타입을 자동으로 생성할 수 있어, 추후 백엔드와 구조를 통일해 사용하기 편리해 선택했습니다.

### 상태 관리

- zustand

가볍고 직관적이며 Recoil이나 Redux처럼 Provider로 감싸줄 필요가 없어 사용이 간편합니다. persist 를 통해 로컬 스토리지 저장도 쉽게 처리가 가능하며,
게시글의 좋아요, 북마크, 리트윗등은 작은 단위로 상태가 나뉘는게 아닌, 전체 리스트를 하나로 관리해야 한다고 생각해서 jotai보단 zustand를 선택했습니다.

### 무한 스크롤

- react-intersection-observer

IntersectionObserver보다 간단하게 사용할 수 있게 도와주며, 코드도 훨씬 깔끔해지는 장점이 있습니다. 특히, 무한 스크롤 구현시 다음 데이터를 불러오는 패턴을 쉽게 구현할 수 있어 선택했습니다.

# ✅ 구현한 기능 목록

### 1-1 게시물 리스트 페이지

- 무한 스크롤로 게시물 목록 표시

### 1-2 게시물 작성 페이지

- 게시물 작성 페이지로 구현
- 텍스트 입력 280자 제한 및 실시간 글자 수 카운터
- 이미지 첨부 기능 (미리보기 포함)
- 작성 완료 후 피드에 새 게시물 반영

### 2-1 좋아요 시스템

- 낙관적 업데이트 적용
- 클릭시 애니메이션 효과 적용
- 게시글 좋아요 Toggle (아이콘 상태 변화 , 카운트 증가/감소)

# 💡 추가 구현한 기능

- 게시글 리트윗 Toggle (아이콘 상태 변화 , 카운트 증가/감소) 낙관적 업데이트 적용
- 게시글 북마크 Toggle (아이콘 상태 변화 , 카운트 증가/감소) 낙관적 업데이트 적용
- 북마크 페이지 (북마크한 게시물만 모아보기)
- 이미지 확대보기 모달
- storybook 공통 컴포넌트 문서화

# 🤔 기술적 고민과 해결 과정

### 1. 상호 작용 기능 구현

게시글의 좋아요, 리트윗, 북마크등의 상호작용이 새로고침시 초기화 되는 문제를 해결하고 싶어서 상태 관리 라이브러리로 zustand를 선택했습니다.
상호작용으로 인해 데이터가 계속해서 변경되어 여러 게시글을 한번에 관리해야한다고 판단했습니다. 또한 새로고침 후에도 데이터를 유지하기 위해서는 persist를 통해 스토리지에 저장하기가 더 용이하다고 판단했기 때문입니다.
초기 mockup 데이터와 sessionStorage 동기화 문제를 해결하기 위해 다음과 같이 처리했습니다.

- sessionStorage가 비어있을때 : mockup 데이터로 사용
- sessionStorage에 데이터가 있을때 : sessionStorage데이터 사용
- 스크롤 동작시, 중복 데이터 방지를 위한 초기 page 처리

### 2. 북마크 페이지 구현

초기에는 mockup데이터에서 isBookmarked값이 true인 게시글만 필터링 해서 보여주려고 했습니다. 그런데 mockup데이터는 정적으로 실시간 북마크 상태를 반영하진 못합니다. 하지만 상호 작용 기능을 구현하면서 zustand store을 사용하고 있기때문에 zustand store에 있는 게시글 정보를 통해 실시간 북마크 상태를 반영할 수 있도록 했습니다. 결과적으로 전체 게시글의 리스트에서 필터를 해서 사용함으로써, 북마크나 좋아요, 리트윗과 같은 기능을 전체 게시글 리스트와 동일하게 사용할 수 있었고, 전체 게시글과 동일한 컴포넌트 및 상호작용 로직을 그대로 사용할 수 있었습니다.

### 3. 이미지 삽입 및 이미지 상세 모달

게시글 등록시 사용되는 이미지 삽입기능은 추후 다른 곳에서도 사용될 수 있는 가능성을 고려해 Image feature로 따로 구분해 schema를 정의했습니다.

이미지를 선택했을때, 이미지를 크게 보여주는 모달을 만들기 위해 useGetImageSize 커스텀 훅을 작성해 이미지의 실제 width와 height를 가져와 원본 비율을 계산해 보여줄 수 있도록 했습니다. 또한 업로드된 이미지의 개수에 따라 레이아웃이 다르게 보여지도록 했습니다.

- 1개 : 단일 이미지로 보여짐
- 2~4개 : Grid레이아웃으로 보여짐
- 5개 이상 : Grid레이아웃에서 3개까지는 이미지를 그대로 노출하고 나머지 하나는 더 있음을 보여주기 위해 더보기 아이콘으로 보여짐.
